* C:\Users\tomii\Github\Voltage_Regulator\voltage_regulator.asc
Q1 N004 N005 N011 0 C2335
V1 N004 0 {Vcc}
Vreference N008 0 10
Rload N011 0 50
R1 N011 N010 100k
R2 N010 0 100k
R3 N004 N007 {Rc}
Q2 N007 N009 N012 0 2N2222
Q3 N006 N010 N012 0 2N2222
R4 N004 N006 {Rc}
V2 N009 N008 2
V3 N001 0 20
R5 N003 N001 1
R6 N012 0 {Re}
R7 N005 N006 1
Q6 N013 N016 N021 0 C2335
V5 N013 N020 {Vcc}
Rload2 N021 0 50
R10 N021 N014 1k
R11 N014 0 350k
XU2 N017 N014 N013 0 N015 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
Vreference2 N017 0 7
D1 N016 N015 1N4007
R12 N013 N016 1k
R14 N015 0 56k
R15 N020 0 {Rshunt}
XU3 N020 N018 N013 0 N019 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
D2 N016 N019 1N4007
R16 N019 0 56k
Q4 N002 N003 0 0 C2335
Q5 N023 N033 N037 0 C2335
V4 N023 0 {Vcc}
Rload1 N049 0 0.1
R13 N049 N025 1k
R17 N025 0 1Meg
XU1 N031 N025 N023 0 N028 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
Vreference1 N031 0 8
D3 N029 N028 1N4007
R18 N023 N029 1k
R19 N028 0 56k
XU4 N042 N037 N023 0 N035 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
D4 N029 N035 1N4007
R21 N035 0 56k
V6 N018 0 -0.1
R8 N037 N049 {Rshunt}
XU5 N050 N052 N051 0 N053 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
R9 N050 P001 1k
R20 N050 P002 1k
V7 N051 0 25
V9 P001 0 2
V10 P002 0 3.5
R23 N053 0 200k
R22 N053 N052 10k
R24 N052 0 10k
VrefCurrent N055 0 3
R26 N048 N055 1k
XU6 N048 N043 N023 0 N042 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
R28 N043 0 1k
R29 N043 N042 1k
R25 N044 N048 1k
XU7 N025 N045 N023 0 N044 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
XU8 N056 N058 N057 0 N059 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
R27 N056 P003 1k
V8 N057 0 25
V11 P003 0 2
R31 N059 0 200k
R32 N059 N058 1k
R30 N045 N044 1k
Q7 N023 N029 N033 0 2N2222
R33 N001 N002 10k
Q8 N022 N032 N036 0 C2335
V12 N022 0 {Vcc}
Rload3 N047 0 0.1
R34 N047 N024 1k
R35 N024 0 1Meg
XU9 N030 N024 N022 0 N026 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
Vreference3 N030 0 8
D5 N027 N026 1N4007
R36 N022 N027 1k
R37 N026 0 56k
XU10 N038 N036 N022 0 N034 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
D6 N027 N034 1N4007
R38 N034 0 56k
R39 N036 N047 {Rshunt}
VrefCurrent1 N054 0 3
R40 N046 N054 1k
XU11 N046 N039 N022 0 N038 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
R41 N039 0 1k
R42 N039 N038 1k
R43 N040 N046 1k
XU12 N024 N041 N022 0 N040 level3b Avol=1Meg GBW=10Meg Slew=10Meg Ilimit=25m Rail=0 Vos=0 Phimargin=45 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
R44 N041 N040 1k
Q9 N022 N027 N032 0 2N2222
V13 N060 0 PULSE(0 5 0 0 0 {1/Fsqr} {2/Fsqr} 0)
R45 N061 N060 1k
C1 N061 0 47µ
V14 N062 0 12
R46 N064 N062 2k
Q10 N063 N064 N065 0 NPN
R47 N062 N063 10k
R48 N065 0 10k
.model D D
.lib C:\Users\tomii\AppData\Local\LTspice\lib\cmp\standard.dio
.model NPN NPN
.model PNP PNP
.lib C:\Users\tomii\AppData\Local\LTspice\lib\cmp\standard.bjt
* La idea es hacer una fuente regulable de tensión y corriente. Como una fuente de laboratorio.\nPasa que no voy a gastar un sope entonces la hago con lo que tengo
* Me voy a basar principalmente en que tengo una fuente de 12V a 2A.\nY un transistor de potencia NPN (C2335) que tiene poca ganancia Hfe de 50
.param Vcc=12
.MODEL C2335 AKO: 2N2222 (Bf=50 IS=201E-20)
.tran 100ms
.param Re=10 Rc=1k
.param Rshunt=1
* Esta sería la versión que voy a implementar con los controles con el micro
* La idea es hacer realimentación con el micro y hacer ajuste fino con esa realimentación
* Faltaria hacer el analisis de polos para sacar el Ts para el muestreador y la realimentación del micro
* En realidad se puede hacer completamente analógico y los ajustes son Volt a Volt y Ampere a Ampere
.param Fsqr=10e3
.lib UniversalOpAmp3b.lib
.backanno
.end
