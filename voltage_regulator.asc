Version 4
SHEET 1 9544 5336
WIRE 1488 -48 1264 -48
WIRE 1744 -48 1488 -48
WIRE 1744 -32 1744 -48
WIRE 1744 96 1744 48
WIRE 1264 112 1264 -48
WIRE 1488 144 1488 -48
WIRE 1680 144 1568 144
WIRE 1264 256 1264 192
WIRE 1392 256 1264 256
WIRE 1744 256 1744 192
WIRE 1744 256 1392 256
WIRE 1232 464 304 464
WIRE 1536 464 1232 464
WIRE 2224 464 1536 464
WIRE 2224 512 2224 464
WIRE 1232 528 1232 464
WIRE 1536 528 1536 464
WIRE 2160 560 1840 560
WIRE 304 576 304 464
WIRE 1536 624 1536 608
WIRE 1744 624 1536 624
WIRE 1840 624 1840 560
WIRE 1840 624 1824 624
WIRE 1232 640 1232 608
WIRE 1536 640 1536 624
WIRE 1024 688 944 688
WIRE 1168 688 1104 688
WIRE 1840 688 1600 688
WIRE 2224 688 2224 608
WIRE 2224 688 1952 688
WIRE 944 704 944 688
WIRE 1952 720 1952 688
WIRE 1376 736 1232 736
WIRE 1536 736 1376 736
WIRE 2224 752 2224 688
WIRE 2464 752 2224 752
WIRE 1376 784 1376 736
WIRE 1840 816 1840 688
WIRE 1952 816 1952 800
WIRE 1952 816 1840 816
WIRE 2464 832 2224 832
WIRE 304 912 304 656
WIRE 944 912 944 784
WIRE 944 912 304 912
WIRE 1376 912 1376 864
WIRE 1376 912 944 912
WIRE 1952 912 1952 896
WIRE 1952 912 1376 912
WIRE 2224 912 2224 832
WIRE 2224 912 1952 912
WIRE 304 928 304 912
WIRE 864 1408 288 1408
WIRE 1584 1408 864 1408
WIRE 2432 1408 1584 1408
WIRE 2832 1408 2432 1408
WIRE 2832 1456 2832 1408
WIRE 1584 1472 1584 1408
WIRE 1552 1488 1440 1488
WIRE 1872 1504 1616 1504
WIRE 1984 1504 1872 1504
WIRE 2432 1504 2432 1488
WIRE 2432 1504 2048 1504
WIRE 2768 1504 2432 1504
WIRE 288 1520 288 1408
WIRE 1552 1520 1360 1520
WIRE 1360 1536 1360 1520
WIRE 1872 1536 1872 1504
WIRE 864 1648 864 1408
WIRE 832 1664 624 1664
WIRE 2080 1680 896 1680
WIRE 2160 1680 2080 1680
WIRE 2432 1680 2432 1504
WIRE 2432 1680 2224 1680
WIRE 288 1696 288 1600
WIRE 832 1696 288 1696
WIRE 2080 1728 2080 1680
WIRE 624 1776 624 1664
WIRE 2832 1824 2832 1552
WIRE 2832 1824 2560 1824
WIRE 288 1840 288 1696
WIRE 2560 1856 2560 1824
WIRE 2832 1888 2832 1824
WIRE 3072 1888 2832 1888
WIRE 1440 1952 1440 1488
WIRE 2560 1952 2560 1936
WIRE 2560 1952 1440 1952
WIRE 2560 1968 2560 1952
WIRE 3072 1968 2832 1968
WIRE 288 2112 288 1920
WIRE 624 2112 624 1856
WIRE 624 2112 288 2112
WIRE 864 2112 864 1712
WIRE 864 2112 624 2112
WIRE 1360 2112 1360 1616
WIRE 1360 2112 864 2112
WIRE 1584 2112 1584 1536
WIRE 1584 2112 1360 2112
WIRE 1872 2112 1872 1616
WIRE 1872 2112 1584 2112
WIRE 2080 2112 2080 1808
WIRE 2080 2112 1872 2112
WIRE 2560 2112 2560 2048
WIRE 2560 2112 2080 2112
WIRE 2832 2112 2832 1968
WIRE 2832 2112 2560 2112
WIRE 288 2128 288 2112
WIRE 6576 2304 6256 2304
WIRE 7040 2304 6576 2304
WIRE 7600 2304 7040 2304
WIRE 8128 2304 7600 2304
WIRE 8864 2304 8128 2304
WIRE 9072 2304 8864 2304
WIRE 9264 2304 9072 2304
WIRE 608 2320 288 2320
WIRE 1072 2320 608 2320
WIRE 1632 2320 1072 2320
WIRE 2160 2320 1632 2320
WIRE 2896 2320 2160 2320
WIRE 3104 2320 2896 2320
WIRE 3296 2320 3104 2320
WIRE 9072 2352 9072 2304
WIRE 3104 2368 3104 2320
WIRE 8128 2368 8128 2304
WIRE 2160 2384 2160 2320
WIRE 8096 2384 7984 2384
WIRE 2128 2400 2016 2400
WIRE 8416 2400 8160 2400
WIRE 8512 2400 8416 2400
WIRE 8864 2400 8864 2384
WIRE 8864 2400 8576 2400
WIRE 9008 2400 8864 2400
WIRE 2448 2416 2192 2416
WIRE 2544 2416 2448 2416
WIRE 2896 2416 2896 2400
WIRE 2896 2416 2608 2416
WIRE 3040 2416 2896 2416
WIRE 8096 2416 7904 2416
WIRE 2128 2432 1936 2432
WIRE 7904 2432 7904 2416
WIRE 1936 2448 1936 2432
WIRE 8416 2448 8416 2400
WIRE 2448 2464 2448 2416
WIRE 9264 2464 9264 2304
WIRE 3296 2480 3296 2320
WIRE 9072 2512 9072 2448
WIRE 9200 2512 9072 2512
WIRE 3104 2528 3104 2464
WIRE 3232 2528 3104 2528
WIRE 8624 2576 6736 2576
WIRE 8704 2576 8624 2576
WIRE 8864 2576 8864 2400
WIRE 8864 2576 8768 2576
WIRE 2656 2592 768 2592
WIRE 2736 2592 2656 2592
WIRE 2896 2592 2896 2416
WIRE 2896 2592 2800 2592
WIRE 8624 2624 8624 2576
WIRE 2656 2640 2656 2592
WIRE 9264 2752 9264 2560
WIRE 9264 2752 6432 2752
WIRE 3296 2768 3296 2576
WIRE 3296 2768 464 2768
WIRE 6256 2784 6256 2304
WIRE 288 2800 288 2320
WIRE 9264 2848 9264 2752
WIRE 3296 2864 3296 2768
WIRE 6864 2976 6800 2976
WIRE 7168 2976 6944 2976
WIRE 7472 2976 7440 2976
WIRE 7664 2976 7552 2976
WIRE 896 2992 832 2992
WIRE 1200 2992 976 2992
WIRE 1504 2992 1472 2992
WIRE 1696 2992 1584 2992
WIRE -1024 3008 -1552 3008
WIRE 6576 3040 6576 2304
WIRE 608 3056 608 2320
WIRE 6432 3056 6432 2752
WIRE 6544 3056 6432 3056
WIRE 464 3072 464 2768
WIRE 576 3072 464 3072
WIRE 6736 3072 6736 2576
WIRE 6736 3072 6608 3072
WIRE 7040 3072 7040 2304
WIRE 768 3088 768 2592
WIRE 768 3088 640 3088
WIRE 1072 3088 1072 2320
WIRE 6544 3088 6432 3088
WIRE 7168 3088 7168 2976
WIRE 7168 3088 7072 3088
WIRE 7600 3088 7600 2304
WIRE -1024 3104 -1024 3008
WIRE 576 3104 464 3104
WIRE 1200 3104 1200 2992
WIRE 1200 3104 1104 3104
WIRE 1632 3104 1632 2320
WIRE 6800 3104 6800 2976
WIRE 7008 3104 6800 3104
WIRE 7664 3104 7664 2976
WIRE 7664 3104 7632 3104
WIRE 832 3120 832 2992
WIRE 1040 3120 832 3120
WIRE 1696 3120 1696 2992
WIRE 1696 3120 1664 3120
WIRE 7280 3120 7072 3120
WIRE 7328 3120 7280 3120
WIRE 7440 3120 7440 2976
WIRE 7440 3120 7408 3120
WIRE 7568 3120 7440 3120
WIRE 9264 3120 9264 2928
WIRE 9264 3120 8992 3120
WIRE 1312 3136 1104 3136
WIRE 1360 3136 1312 3136
WIRE 1472 3136 1472 2992
WIRE 1472 3136 1440 3136
WIRE 1600 3136 1472 3136
WIRE 3296 3136 3296 2944
WIRE 3296 3136 3024 3136
WIRE 7984 3136 7984 2384
WIRE 7984 3136 7632 3136
WIRE 2016 3152 2016 2400
WIRE 2016 3152 1664 3152
WIRE 8992 3152 8992 3120
WIRE 3024 3168 3024 3136
WIRE 6432 3168 6432 3088
WIRE 6800 3168 6800 3104
WIRE 6800 3168 6432 3168
WIRE 464 3184 464 3104
WIRE 832 3184 832 3120
WIRE 832 3184 464 3184
WIRE 9264 3184 9264 3120
WIRE 9424 3184 9264 3184
WIRE -1552 3200 -1552 3008
WIRE -1472 3200 -1552 3200
WIRE -1216 3200 -1312 3200
WIRE 3296 3200 3296 3136
WIRE 3456 3200 3296 3200
WIRE 7280 3200 7280 3120
WIRE -1024 3216 -1024 3184
WIRE 1312 3216 1312 3136
WIRE -1056 3232 -1136 3232
WIRE 7168 3232 7168 3088
WIRE -912 3248 -992 3248
WIRE -736 3248 -912 3248
WIRE 1200 3248 1200 3104
WIRE 7984 3248 7984 3136
WIRE 8992 3248 8992 3232
WIRE 8992 3248 7984 3248
WIRE -1216 3264 -1216 3200
WIRE -1056 3264 -1216 3264
WIRE 2016 3264 2016 3152
WIRE 3024 3264 3024 3248
WIRE 3024 3264 2016 3264
WIRE 8992 3264 8992 3248
WIRE 9424 3264 9264 3264
WIRE 3024 3280 3024 3264
WIRE 3456 3280 3296 3280
WIRE 7280 3296 7280 3280
WIRE 1312 3312 1312 3296
WIRE -1552 3344 -1552 3200
WIRE -1472 3344 -1552 3344
WIRE -1216 3344 -1216 3264
WIRE -1216 3344 -1312 3344
WIRE -1136 3360 -1136 3232
WIRE -992 3360 -1136 3360
WIRE -912 3360 -912 3248
WIRE -736 3376 -736 3248
WIRE 6256 3408 6256 2864
WIRE 6576 3408 6576 3104
WIRE 6576 3408 6256 3408
WIRE 7040 3408 7040 3136
WIRE 7040 3408 6576 3408
WIRE 7168 3408 7168 3312
WIRE 7168 3408 7040 3408
WIRE 7280 3408 7280 3376
WIRE 7280 3408 7168 3408
WIRE 7600 3408 7600 3152
WIRE 7600 3408 7280 3408
WIRE 7904 3408 7904 2512
WIRE 7904 3408 7600 3408
WIRE 8128 3408 8128 2432
WIRE 8128 3408 7904 3408
WIRE 8416 3408 8416 2528
WIRE 8416 3408 8128 3408
WIRE 8624 3408 8624 2704
WIRE 8624 3408 8416 3408
WIRE 8992 3408 8992 3344
WIRE 8992 3408 8624 3408
WIRE 9264 3408 9264 3264
WIRE 9264 3408 8992 3408
WIRE -1136 3424 -1136 3360
WIRE 288 3424 288 2880
WIRE 608 3424 608 3120
WIRE 608 3424 288 3424
WIRE 1072 3424 1072 3152
WIRE 1072 3424 608 3424
WIRE 1200 3424 1200 3328
WIRE 1200 3424 1072 3424
WIRE 1312 3424 1312 3392
WIRE 1312 3424 1200 3424
WIRE 1632 3424 1632 3168
WIRE 1632 3424 1312 3424
WIRE 1936 3424 1936 2528
WIRE 1936 3424 1632 3424
WIRE 2160 3424 2160 2448
WIRE 2160 3424 1936 3424
WIRE 2448 3424 2448 2544
WIRE 2448 3424 2160 3424
WIRE 2656 3424 2656 2720
WIRE 2656 3424 2448 3424
WIRE 3024 3424 3024 3360
WIRE 3024 3424 2656 3424
WIRE 3296 3424 3296 3280
WIRE 3296 3424 3024 3424
WIRE 6256 3424 6256 3408
WIRE 288 3440 288 3424
WIRE -1552 3584 -1552 3344
WIRE -1520 3584 -1552 3584
WIRE -1136 3584 -1136 3504
WIRE -1136 3584 -1520 3584
WIRE -1024 3584 -1024 3280
WIRE -1024 3584 -1136 3584
WIRE -736 3584 -736 3456
WIRE -736 3584 -1024 3584
WIRE -1008 3744 -1536 3744
WIRE -1008 3840 -1008 3744
WIRE -1536 3936 -1536 3744
WIRE -1456 3936 -1536 3936
WIRE -1200 3936 -1296 3936
WIRE -1008 3952 -1008 3920
WIRE -1040 3968 -1120 3968
WIRE -896 3984 -976 3984
WIRE -720 3984 -896 3984
WIRE -1200 4000 -1200 3936
WIRE -1040 4000 -1200 4000
WIRE -1120 4096 -1120 3968
WIRE -976 4096 -1120 4096
WIRE -896 4096 -896 3984
WIRE -720 4112 -720 3984
WIRE -1536 4320 -1536 3936
WIRE -1504 4320 -1536 4320
WIRE -1008 4320 -1008 4016
WIRE -1008 4320 -1504 4320
WIRE -720 4320 -720 4192
WIRE -720 4320 -1008 4320
WIRE -1312 4528 -1520 4528
WIRE -1168 4528 -1232 4528
WIRE -976 4528 -1168 4528
WIRE -1520 4560 -1520 4528
WIRE -1168 4576 -1168 4528
WIRE -1520 4720 -1520 4640
WIRE -1440 4720 -1520 4720
WIRE -1168 4720 -1168 4640
WIRE -1168 4720 -1440 4720
WIRE -976 4720 -1168 4720
WIRE -1232 4896 -1520 4896
WIRE -992 4896 -1232 4896
WIRE -1520 4928 -1520 4896
WIRE -992 4928 -992 4896
WIRE -992 5040 -992 5008
WIRE -1232 5088 -1232 4896
WIRE -1056 5088 -1152 5088
WIRE -992 5184 -992 5136
WIRE -1520 5312 -1520 5008
WIRE -1440 5312 -1520 5312
WIRE -992 5312 -992 5264
WIRE -992 5312 -1440 5312
FLAG 304 928 0
FLAG 1392 256 0
FLAG 288 2128 0
FLAG 288 3440 0
FLAG -1520 3584 0
FLAG -1504 4320 0
FLAG 6256 3424 0
FLAG -1440 4720 0
FLAG -1440 5312 0
SYMBOL npn 2160 512 R0
SYMATTR InstName Q1
SYMATTR Value C2335
SYMBOL voltage 304 560 R0
WINDOW 0 -103 49 Left 2
WINDOW 3 -116 90 Left 2
SYMATTR InstName V1
SYMATTR Value {Vcc}
SYMBOL voltage 944 688 R0
WINDOW 0 -203 38 Left 2
WINDOW 3 -156 74 Left 2
SYMATTR InstName Vreference
SYMATTR Value 10
SYMBOL res 2448 736 R0
SYMATTR InstName Rload
SYMATTR Value 50
SYMBOL res 1936 704 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 1936 800 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 1216 512 R0
SYMATTR InstName R3
SYMATTR Value {Rc}
SYMBOL npn 1168 640 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL npn 1600 640 M0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res 1520 512 R0
SYMATTR InstName R4
SYMATTR Value {Rc}
SYMBOL voltage 1120 688 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 2
SYMBOL voltage 1264 96 R0
SYMATTR InstName V3
SYMATTR Value 20
SYMBOL res 1584 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1
SYMBOL res 1360 768 R0
SYMATTR InstName R6
SYMATTR Value {Re}
SYMBOL res 1840 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1
SYMBOL npn 2768 1456 R0
SYMATTR InstName Q6
SYMATTR Value C2335
SYMBOL voltage 288 1504 R0
WINDOW 0 -103 49 Left 2
WINDOW 3 -116 90 Left 2
SYMATTR InstName V5
SYMATTR Value {Vcc}
SYMBOL res 3056 1872 R0
SYMATTR InstName Rload2
SYMATTR Value 50
SYMBOL res 2544 1840 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL res 2544 1952 R0
SYMATTR InstName R11
SYMATTR Value 350k
SYMBOL OpAmps\\UniversalOpAmp3b 1584 1504 R0
SYMATTR InstName U2
SYMBOL voltage 1360 1520 R0
WINDOW 0 -195 42 Left 2
WINDOW 3 -121 74 Left 2
SYMATTR InstName Vreference2
SYMATTR Value 7
SYMBOL diode 2048 1488 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4007
SYMBOL res 2416 1392 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 1856 1520 R0
WINDOW 0 37 52 Left 2
WINDOW 3 41 76 Left 2
SYMATTR InstName R14
SYMATTR Value 56k
SYMBOL res 272 1824 R0
SYMATTR InstName R15
SYMATTR Value {Rshunt}
SYMBOL OpAmps\\UniversalOpAmp3b 864 1680 R0
SYMATTR InstName U3
SYMBOL diode 2224 1664 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N4007
SYMBOL res 2064 1712 R0
WINDOW 0 37 52 Left 2
WINDOW 3 41 76 Left 2
SYMATTR InstName R16
SYMATTR Value 56k
SYMBOL npn 1680 96 R0
SYMATTR InstName Q4
SYMATTR Value C2335
SYMBOL npn 3232 2480 R0
SYMATTR InstName Q5
SYMATTR Value C2335
SYMBOL voltage 288 2784 R0
WINDOW 0 -103 49 Left 2
WINDOW 3 -116 90 Left 2
SYMATTR InstName V4
SYMATTR Value {Vcc}
SYMBOL res 3440 3184 R0
SYMATTR InstName Rload1
SYMATTR Value 0.1
SYMBOL res 3008 3152 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res 3008 3264 R0
SYMATTR InstName R17
SYMATTR Value 1Meg
SYMBOL OpAmps\\UniversalOpAmp3b 2160 2416 R0
SYMATTR InstName U1
SYMBOL voltage 1936 2432 R0
WINDOW 0 -216 47 Left 2
WINDOW 3 -137 81 Left 2
SYMATTR InstName Vreference1
SYMATTR Value 8
SYMBOL diode 2608 2400 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4007
SYMBOL res 2880 2304 R0
WINDOW 0 43 44 Left 2
WINDOW 3 51 71 Left 2
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res 2432 2448 R0
WINDOW 0 37 52 Left 2
WINDOW 3 41 76 Left 2
SYMATTR InstName R19
SYMATTR Value 56k
SYMBOL OpAmps\\UniversalOpAmp3b 608 3088 R0
SYMATTR InstName U4
SYMBOL diode 2800 2576 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value 1N4007
SYMBOL res 2640 2624 R0
WINDOW 0 37 52 Left 2
WINDOW 3 41 76 Left 2
SYMATTR InstName R21
SYMATTR Value 56k
SYMBOL voltage 624 1760 R0
WINDOW 0 37 40 Left 2
WINDOW 3 43 76 Left 2
SYMATTR InstName V6
SYMATTR Value -0.1
SYMBOL res 3280 2848 R0
SYMATTR InstName R8
SYMATTR Value {Rshunt}
SYMBOL OpAmps\\UniversalOpAmp3b -1024 3248 R0
SYMATTR InstName U5
SYMBOL res -1296 3184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res -1296 3328 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 1k
SYMBOL voltage -1024 3200 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName V7
SYMATTR Value 25
SYMBOL voltage -1376 3200 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V9
SYMATTR Value 2
SYMBOL voltage -1376 3344 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V10
SYMATTR Value 3.5
SYMBOL res -752 3360 R0
SYMATTR InstName R23
SYMATTR Value 200k
SYMBOL res -896 3344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL res -1152 3408 R0
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL voltage 1312 3296 R0
WINDOW 0 33 47 Left 2
WINDOW 3 40 81 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VrefCurrent
SYMATTR Value 3
SYMBOL res 1296 3200 R0
SYMATTR InstName R26
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp3b 1072 3120 M0
SYMATTR InstName U6
SYMBOL res 1184 3232 R0
SYMATTR InstName R28
SYMATTR Value 1k
SYMBOL res 992 2976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 1k
SYMBOL res 1456 3120 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp3b 1632 3136 M0
SYMATTR InstName U7
SYMBOL OpAmps\\UniversalOpAmp3b -1008 3984 R0
SYMATTR InstName U8
SYMBOL res -1280 3920 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 1k
SYMBOL voltage -1008 3936 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName V8
SYMATTR Value 25
SYMBOL voltage -1360 3936 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V11
SYMATTR Value 2
SYMBOL res -736 4096 R0
SYMATTR InstName R31
SYMATTR Value 200k
SYMBOL res -880 4080 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 1k
SYMBOL res 1600 2976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 1k
SYMBOL npn 3040 2368 R0
SYMATTR InstName Q7
SYMATTR Value 2N2222
SYMBOL res 1728 -48 R0
SYMATTR InstName R33
SYMATTR Value 10k
SYMBOL npn 9200 2464 R0
SYMATTR InstName Q8
SYMATTR Value C2335
SYMBOL voltage 6256 2768 R0
WINDOW 0 -103 49 Left 2
WINDOW 3 -116 90 Left 2
SYMATTR InstName V12
SYMATTR Value {Vcc}
SYMBOL res 9408 3168 R0
SYMATTR InstName Rload3
SYMATTR Value 0.1
SYMBOL res 8976 3136 R0
SYMATTR InstName R34
SYMATTR Value 1k
SYMBOL res 8976 3248 R0
SYMATTR InstName R35
SYMATTR Value 1Meg
SYMBOL OpAmps\\UniversalOpAmp3b 8128 2400 R0
SYMATTR InstName U9
SYMBOL voltage 7904 2416 R0
WINDOW 0 -216 47 Left 2
WINDOW 3 -137 81 Left 2
SYMATTR InstName Vreference3
SYMATTR Value 8
SYMBOL diode 8576 2384 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value 1N4007
SYMBOL res 8848 2288 R0
WINDOW 0 43 44 Left 2
WINDOW 3 51 71 Left 2
SYMATTR InstName R36
SYMATTR Value 1k
SYMBOL res 8400 2432 R0
WINDOW 0 37 52 Left 2
WINDOW 3 41 76 Left 2
SYMATTR InstName R37
SYMATTR Value 56k
SYMBOL OpAmps\\UniversalOpAmp3b 6576 3072 R0
SYMATTR InstName U10
SYMBOL diode 8768 2560 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMATTR Value 1N4007
SYMBOL res 8608 2608 R0
WINDOW 0 37 52 Left 2
WINDOW 3 41 76 Left 2
SYMATTR InstName R38
SYMATTR Value 56k
SYMBOL res 9248 2832 R0
SYMATTR InstName R39
SYMATTR Value {Rshunt}
SYMBOL voltage 7280 3280 R0
WINDOW 0 33 47 Left 2
WINDOW 3 40 81 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VrefCurrent1
SYMATTR Value 3
SYMBOL res 7264 3184 R0
SYMATTR InstName R40
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp3b 7040 3104 M0
SYMATTR InstName U11
SYMBOL res 7152 3216 R0
SYMATTR InstName R41
SYMATTR Value 1k
SYMBOL res 6960 2960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R42
SYMATTR Value 1k
SYMBOL res 7424 3104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp3b 7600 3120 M0
SYMATTR InstName U12
SYMBOL res 7568 2960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R44
SYMATTR Value 1k
SYMBOL npn 9008 2352 R0
SYMATTR InstName Q9
SYMATTR Value 2N2222
SYMBOL sym\\voltage -1520 4544 R0
WINDOW 0 -186 31 Left 2
WINDOW 3 -395 68 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V13
SYMATTR Value PULSE(0 5 0 0 0 {1/Fsqr} {2/Fsqr} 0)
SYMBOL res -1216 4512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R45
SYMATTR Value 1k
SYMBOL cap -1184 4576 R0
SYMATTR InstName C1
SYMATTR Value 47µ
SYMBOL sym\\voltage -1520 4912 R0
WINDOW 0 -104 37 Left 2
WINDOW 3 -91 78 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V14
SYMATTR Value 12
SYMBOL res -1136 5072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R46
SYMATTR Value 2k
SYMBOL npn -1056 5040 R0
SYMATTR InstName Q10
SYMBOL res -1008 4912 R0
SYMATTR InstName R47
SYMATTR Value 10k
SYMBOL res -1008 5168 R0
SYMATTR InstName R48
SYMATTR Value 10k
TEXT -104 0 Left 2 ;La idea es hacer una fuente regulable de tensión y corriente. Como una fuente de laboratorio.\nPasa que no voy a gastar un sope entonces la hago con lo que tengo
TEXT -104 88 Left 2 ;Me voy a basar principalmente en que tengo una fuente de 12V a 2A.\nY un transistor de potencia NPN (C2335) que tiene poca ganancia Hfe de 50
TEXT -88 248 Left 2 !.param Vcc=12
TEXT -88 304 Left 2 !.MODEL C2335 AKO: 2N2222 (Bf=50 IS=201E-20)
TEXT -104 848 Left 2 !.tran 100ms
TEXT -88 208 Left 2 !.param Re=10 Rc=1k
TEXT 296 1320 Left 2 !.param Rshunt=1
TEXT 6272 1824 Left 2 ;Esta sería la versión que voy a implementar con los controles con el micro
TEXT 6272 1880 Left 2 ;La idea es hacer realimentación con el micro y hacer ajuste fino con esa realimentación
TEXT 6272 1952 Left 2 ;Faltaria hacer el analisis de polos para sacar el Ts para el muestreador y la realimentación del micro
TEXT 6272 2008 Left 2 ;En realidad se puede hacer completamente analógico y los ajustes son Volt a Volt y Ampere a Ampere
TEXT -1904 4488 Left 2 !.param Fsqr=10e3
